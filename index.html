
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  <title>GIS Map</title>

  <!-- Custom styles for this template -->
  <link href="../../css/sticky-footer-navbar.css" rel="stylesheet">
  <!-- Bootstrap core CSS -->
  <link href="../../css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="../css/leaflet.css" />
  <link rel="stylesheet" href="../css/leaflet-panel-layers.css" />
  <link rel="stylesheet" href="../css/icons.css" />
  <link rel="stylesheet" href="../../css/fullscreen.css" />

  <script src="../js/leaflet.js"></script>
  <script src="../js/leaflet-panel-layers.js"></script>

  <!-- GEOJSON DATA -->
  <script src="js/data/kl_riks_pipelines_30.js"></script>
  <script src="js/data/tl_riks_environment_types_22.js"></script>
	<script src="js/data/js_riks_railways_18.js"></script>
	<script src="js/data/mo_riks_islands_1.js"></script>
	<script src="js/data/mb_riks_population_density_6.js"></script>
	<script src="js/data/hl_riks_water_28.js"></script>
	<script src="js/data/mh_riks_sea_0.js"></script>
	<script src="js/data/ak_riks_muncipality_4.js"></script>
	<script src="js/data/vl_riks_roads_23.js"></script>
	<script src="js/data/ms_riks_water_surface_7.js"></script>
	<script src="js/data/nv_riks_nature_reserve_10.js"></script>
	<script src="js/data/nl_riks_nature_reserve_33.js"></script>
</head>

<body>

	<div id="row">

		<div class="col-md-12 homeHeader">

			<header>
				<h3>Interactive and Dynamic Map</h3>
			</header>

			<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12" style="">
	       <div id="map" style=" box-shadow:2px 2px 5px #888888;"></div>
         <p> Patience data is loading...</p>
      </div>

		</div>

	</div>

  <script src="../../js/jquery.min.js"></script>
  <script src="../../js/bootstrap.min.js"></script>

	<script src="../../js/fullscreen.js" ></script>
	<script src="../../js/fullscreen.min.js" ></script>

	<script>

  	var map = L.map('map', {
  			zoom: 4,
  			attributionControl: false,
  			center: L.latLng([59, 18]),
  			fullscreenControl: {
  				pseudoFullscreen: false
  			},
  		}),
  		osmLayer = new L.TileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png');

  	map.addLayer(osmLayer);

  	function iconByName(name) {
  		return '<i class="icon icon-'+name+'"></i>';
  	}

  	function featureToMarker(feature, latlng) {
  		return L.marker(latlng, {
  			icon: L.divIcon({
  				className: 'marker-'+feature.properties.amenity,
  			//	html: iconByName(feature.properties.amenity),
  				iconUrl: '../images/markers/'+feature.properties.amenity+'.png',
  				iconSize: [25, 41],
  				iconAnchor: [12, 41],
  				popupAnchor: [1, -34],
  				shadowSize: [41, 41]
  			})
  		});
  	}

  	var baseLayers = [
  		{
  			name: "Road Terrain",
  			layer: osmLayer
  		}
  	];

  	var roadStyle = {
  		"color" : "#F50213",
  		"weight":1,
  		"opacity": 1
  	};

  	var overLayers = [
      {
        name: "Muncipality Boundary",
        icon: iconByName('waterBody'),
        layer: L.geoJson(json_ak_riks_muncipality_4, {pointToLayer: featureToMarker, color: '#66d9ff', fillColor: '#0044FF', weight: 1,  opacity: 1, fillOpacity: .51 })
      },
  		{
  			name: "Protected Area",
  			icon: iconByName('protectedArea'),
  			layer: L.geoJson(json_nv_riks_nature_reserve_10, {pointToLayer: featureToMarker, color: '#111', fillColor: '#007a0b', weight: 2.3, opacity: .5, fillOpacity: .3 })
  		},
  		{
  			name: "Deforestation",
  			icon: iconByName('deforestation'),
  			layer: L.geoJson(json_nl_riks_nature_reserve_33, {pointToLayer: featureToMarker, color: 'black', fillColor: 'black', weight: 1, opacity: 1, fillOpacity: 1 })
  		},
  		{
  			name: "Sea",
  			icon: iconByName('flood'),
  			layer: L.geoJson(json_mh_riks_sea_0, {pointToLayer: featureToMarker, color: 'white', fillColor: '#3371d6', weight: 1,  opacity: .5, fillOpacity: .5 })
  		},
  		{
  			name: "Islands",
  			icon: iconByName('wetlands'),
  			layer: L.geoJson(json_mo_riks_islands_1, {pointToLayer: featureToMarker, color: '#66d9ff', fillColor: '#0044FF', weight: 1,  opacity: .5, fillOpacity: .5 })
  		},

      {
  			name: "Pipelines",
  			icon: iconByName('lines'),
  			layer: L.geoJson(json_kl_riks_pipelines_30, {pointToLayer: featureToMarker, color: 'lime', fillColor: '#00C72E', weight: 2.3, opacity: .5, fillOpacity: .3 })
  		},
/*
      {
  			name: "Water Streams",
  			icon: iconByName('waterBody'),
  			layer: L.geoJson(json_hl_riks_water_28, {pointToLayer: featureToMarker, color: '#4da6ff', fillColor: '#66d9ff', weight: 1,  opacity: 1, fillOpacity: .51, })
  		},
	    {
  			name: "Water Surface",
  			icon: iconByName('waterBody'),
  			layer: L.geoJson(json_ms_riks_water_surface_7, {pointToLayer: featureToMarker, style: roadStyle}),
  		},
      {
  			name: "Major Roads",
  			icon: iconByName('rivers'),
  			layer: L.geoJson(json_vl_riks_roads_23, {pointToLayer: featureToMarker, color: 'blue', fillColor: '#00C72E', weight: 2.3, dashArray: '1,1', opacity: .5, fillOpacity: .3, })
  		},

  		{
  			name: "Land Types",
  			icon: iconByName('landConflict'),
  			layer: L.geoJson(json_tl_riks_environment_types_22, {
  			pointToLayer: featureToMarker,
  			style: function(feature){
  				  var fillColor,
  					  KATEGORI = feature.properties.KATEGORI;
  				  if ( KATEGORI == "T채tort" ) fillColor = "#F06161";
  				  else if ( KATEGORI == "Enstaka hus eller g책rd" ) fillColor = "#F3A871";
  				  else if ( KATEGORI == "Naturnamn, sm책 omr책den" ) fillColor = "#E9EC82";
  				  else if ( KATEGORI == "Liten by" ) fillColor = "#B8F1CC";
  				  else fillColor = "#878787";  // no data
  				  return { color: "#999", weight: 1, fillColor: fillColor, fillOpacity: .6 };
  				}
  			})
  		},
*/
  		{
  			name: "Population Density",
  			icon: iconByName('pestInfestation'),
  			layer: L.geoJson(json_mb_riks_population_density_6, {
  			pointToLayer: featureToMarker,
  			style: function(feature){
  				  var fillColor,
					  HWC_RISK = feature.properties.HWC_RISK;
  				  if ( HWC_RISK == "3" ) fillColor = "#FF9999";
  				  else if ( HWC_RISK == "2" ) fillColor = "#FFFCAC";
  				  else if ( HWC_RISK == "1" ) fillColor = "#B8F1CC";
  				  else fillColor = "#FF9999";  // no data
  				  return { color: "#999", weight: 2, fillColor: fillColor, fillOpacity: .6 };
  				}
  			})
  		},
  		{
  			name: "Rail Way Centres",
  			icon: iconByName('fire'),
  			layer: L.geoJson(json_js_riks_railways_18, {pointToLayer: featureToMarker })
  		},
  	];
 
  	var panelLayers = new L.Control.PanelLayers(baseLayers, overLayers);

    map.addControl(panelLayers);

		var feature_group = new L.featureGroup([]);
		var raster_group = new L.LayerGroup([]);
		var layerOrder=new Array();

		legend.addTo(map);

		L.control.layers({},{

		},{collapsed:false}).addTo(map);
		L.control.scale({options: {position: 't',maxWidth: 100,metric: true,imperial: false,updateWhenIdle: false}}).addTo(map);

	</script>

  </body>
</html>
